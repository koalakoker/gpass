
<input type="checkbox" id="nav-toggle" hidden>
<nav class="nav">
<label *ngIf="logged" for="nav-toggle" class="nav-toggle" onclick></label>
<ul>
  <li><a href="/list/0" id={{menuStyle(-1)}}>Tutte</a></li>
  <li *ngFor="let cat of category; let i = index">
    <a href="/list/{{cat.id}}" id={{menuStyle(i)}}>{{cat.name}}</a>
  </li>
</ul>
</nav>

<div>
  <ul class="list-group">
    <li class="list-group-item" *ngFor="let element of list; let i = index" 
      [class.active]="isSelected(element)"
      (click)="onSelect(element)">

      <!-- Data -->
      <a target="blank" class="{{getUrl('url', i).enabled}}" href="http://{{getUrl('url', i).value}}">{{getUrl('name', i).value}}</a><span class="badge badge-danger">{{isExpired(i)}}</span>
      <br><br>
      
      <!-- Edit button -->
      <button type="button"
        class="btn"
        *ngIf="isSelected(element)"
        [class.btn-secondary]="!edit"
        [class.btn-dark]="edit"
        (click)="onButtonEdit()">
        Edit
      </button>

      <!-- Remove button -->
      <button type="button"
        class="btn"
        *ngIf="isSelected(element)"
        [class.btn-secondary]="!edit"
        [class.btn-dark]="edit"
        (click)="onButtonRemove(i)">
        Del
      </button>

      <!-- Copy username -->
      <button type="button"
        class="btn"
        *ngIf="isSelected(element)"
        [class.btn-secondary]="!edit"
        [class.btn-dark]="edit"
        ngxClipboard [cbContent]="getUrl('username', i).value" (cbOnSuccess)="sendMessage('Username copied to clipboard')">
        Uname
      </button>

      <!-- Copy password -->
      <button type="button"
        class="btn"
        *ngIf="isSelected(element)"
        [class.btn-secondary]="!edit"
        [class.btn-dark]="edit"
        ngxClipboard [cbContent]="getUrl('pass', i).value" (cbOnSuccess)="sendMessage('Password copied to clipboard')">
        Pass
      </button>

      <div 
        class="list-group-item-primary"
        *ngIf="edit && isSelected(element)">
        
        <!-- Edit element -->
        <div>
          <label>Name
            <input type="text"     class="form-control" [(ngModel)]="list[i].name"             placeholder="name"     (change)="save(i)">
          </label><button class="btn btn-info" (click)="onButtonCategory(i)">Category</button>
          <br>
          <div class="list-group-item list-group-item-success" *ngIf="showCategory">
            <div class="form-group form-check" *ngFor="let cat of category; let j = index">
              <input type="checkbox" class="form-check-input" id={{cat.name}} [(ngModel)]="selectedWebPassCatChecked[j]"
                (change)="onCatCheckChange(i,j)">
              <label class="form-check-label" for={{cat.name}}>{{cat.name}}</label>
            </div>
          </div>
          <label>Url
            <input type="text"     class="form-control" [(ngModel)]="list[i].url"              placeholder="url"      (change)="save(i)">
          </label><br>
          <label>Username
            <input type="text"     class="form-control" [(ngModel)]="list[i].username"         placeholder="username" (change)="save(i)">
          </label><br>
          <label>Password
            <input type="password" class="form-control" [(ngModel)]="list[i].pass"             placeholder="pass"     (change)="save(i)">
          </label><br>
          <label>Registration Date:
            <input type="text"     class="form-control" [(ngModel)]="list[i].registrationDate" placeholder="date"     (change)="save(i)">
          </label><button class="btn btn-info" (click)="onTodayButton(i)">Today</button><br>
          <label>Expiration Date:
            <input type="text"     class="form-control" [(ngModel)]="list[i].expirationDate"   placeholder="date"     (change)="save(i)">
          </label>
        </div>

      </div>

      <div class="alert alert-secondary" role="alert" *ngIf="(message!=='')&&(isSelected(element))">
        {{message}}
      </div>

    </li>
  </ul>
</div>
<br>
<div class="alert alert-danger" role="alert" *ngIf="errorMessage!==''">
  {{errorMessage}}
</div>